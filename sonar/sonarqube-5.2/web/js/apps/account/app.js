define("jquery",[],function(){return window.jQuery}),define("underscore",[],function(){return window._}),define("backbone.marionette",[],function(){return window.Marionette}),define("components/common/modals",["exports","module","jquery","backbone.marionette"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r),u="modal";t.exports=o["default"].ItemView.extend({className:"modal",overlayClassName:"modal-overlay",htmlClassName:"modal-open",events:function(){return{"click .js-modal-close":"onCloseClick"}},onRender:function(){var t=this;this.$el.detach().appendTo((0,s["default"])("body")),(0,s["default"])("html").addClass(this.htmlClassName),this.renderOverlay(),this.keyScope=key.getScope(),key.setScope("modal"),key("escape","modal",function(){return t.destroy(),!1}),this.show(),!this.options.large||this.$el.addClass("modal-large")},show:function(){var t=this;setTimeout(function(){t.$el.addClass("in"),(0,s["default"])("."+t.overlayClassName).addClass("in")},0)},onDestroy:function(){(0,s["default"])("html").removeClass(this.htmlClassName),this.removeOverlay(),key.deleteScope("modal"),key.setScope(this.keyScope)},onCloseClick:function(t){t.preventDefault(),this.destroy()},renderOverlay:function(){var t=(0,s["default"])("."+this.overlayClassName);t.length===0&&(0,s["default"])('<div class="'+this.overlayClassName+'"></div>').appendTo((0,s["default"])("body"))},removeOverlay:function(){(0,s["default"])("."+this.overlayClassName).remove()},attachCloseEvents:function(){var t=this;(0,s["default"])("body").on("click."+u,function(){(0,s["default"])("body").off("click."+u),t.destroy()})}})}),define("components/common/modal-form",["exports","module","underscore","components/common/modals"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r);t.exports=o["default"].extend({ui:function(){return{messagesContainer:".js-modal-messages"}},events:function(){return s["default"].extend(o["default"].prototype.events.apply(this,arguments),{"keydown input,textarea,select":"onInputKeydown","submit form":"onFormSubmit"})},onRender:function(){o["default"].prototype.onRender.apply(this,arguments);var t=this;setTimeout(function(){t.$(":tabbable").first().focus()},0)},onInputKeydown:function(t){t.keyCode===27&&this.destroy()},onFormSubmit:function(t){t.preventDefault()},showErrors:function(t,n){var r=this.ui.messagesContainer.empty();s["default"].isArray(t)&&t.forEach(function(e){var t='<div class="alert alert-danger">'+e.msg+"</div>";r.append(t)}),s["default"].isArray(n)&&n.forEach(function(e){var t='<div class="alert alert-warning">'+e.msg+"</div>";r.append(t)}),this.ui.messagesContainer.scrollParent().scrollTop(0)},disableForm:function(){var t=this.$("form");this.disabledFields=t.find(":input:not(:disabled)"),this.disabledFields.prop("disabled",!0)},enableForm:function(){this.disabledFields!=null&&this.disabledFields.prop("disabled",!1)}})}),this.Templates=this.Templates||{},this.Templates["account-change-password"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i=t.helperMissing,s=this.escapeExpression;return'<form id="pass_form_tag" name="pass_form_tag">\n  <div class="modal-head">\n    <h2>'+s((t.t||e&&e.t||i).call(e,"my_profile.password.title",{name:"t",hash:{},data:r}))+'</h2>\n  </div>\n\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n    <div class="modal-field">\n      <label for="old_password">'+s((t.t||e&&e.t||i).call(e,"my_profile.password.old",{name:"t",hash:{},data:r}))+'<em class="mandatory">*</em></label>\n      <input autocomplete="off" id="old_password" name="old_password" required type="password">\n    </div>\n    <div class="modal-field">\n      <label for="password">'+s((t.t||e&&e.t||i).call(e,"my_profile.password.new",{name:"t",hash:{},data:r}))+'<em class="mandatory">*</em></label>\n      <input autocomplete="off" id="password" name="password" required type="password">\n    </div>\n    <div class="modal-field">\n      <label for="password_confirmation">'+s((t.t||e&&e.t||i).call(e,"my_profile.password.confirm",{name:"t",hash:{},data:r}))+'<em class="mandatory">*</em></label>\n      <input autocomplete="off" id="password_confirmation" name="password_confirmation" required type="password">\n    </div>\n  </div>\n\n  <div class="modal-foot">\n    <input name="commit" type="submit" value="'+s((t.t||e&&e.t||i).call(e,"my_profile.password.submit",{name:"t",hash:{},data:r}))+'">\n    <a class="js-modal-close" href="#">'+s((t.t||e&&e.t||i).call(e,"cancel",{name:"t",hash:{},data:r}))+"</a>\n  </div>\n</form>\n"},useData:!0}),define("apps/account/templates",function(){}),define("apps/account/change-password-view",["exports","module","jquery","../../components/common/modal-form","./templates"],function(e,n,r,i,s){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var u=o(r),a=o(i);n.exports=a["default"].extend({template:Templates["account-change-password"],onFormSubmit:function(n){this._super(n),this.checkPasswords()?this.sendRequest():this.showErrors([{msg:t("user.password_doesnt_match_confirmation")}])},checkPasswords:function(){var t=this.$("#password").val(),n=this.$("#password_confirmation").val();return t===n},sendRequest:function(){var t=this,n={login:window.SS.user,password:this.$("#password").val(),previousPassword:this.$("#old_password").val()},r={type:"POST",url:baseUrl+"/api/users/change_password",data:n,statusCode:{400:null}};this.disableForm(),u["default"].ajax(r).done(function(){t.destroy()}).fail(function(e){t.enableForm(),t.showErrors(e.responseJSON.errors,e.responseJSON.warnings)})}})}),define("apps/account/app",["exports","module","jquery","./change-password-view"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function f(){a.removeClass("hidden")}var s=i(n),o=i(r),u=window.SS&&window.SS.lf&&window.SS.lf.enableGravatar,a=(0,s["default"])(".js-account-favorites tr");t.exports={start:function(){(0,s["default"])("html").addClass("dashboard-page");if(u){var t=Handlebars.helpers.avatarHelper(window.SS.userEmail,100).string;(0,s["default"])(".js-avatar").html(t)}(0,s["default"])(".js-show-all-favorites").on("click",function(e){e.preventDefault(),(0,s["default"])(e.currentTarget).hide(),f()}),(0,s["default"])("#account-change-password-trigger").on("click",function(e){e.preventDefault(),(new o["default"]).render()})}}});