define("backbone.marionette",[],function(){return window.Marionette}),this.Templates=this.Templates||{},this.Templates["groups-delete"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<form id="delete-group-form" autocomplete="off">\n  <div class="modal-head">\n    <h2>Delete Group</h2>\n  </div>\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n    <div class="js-modal-text">Are you sure you want to delete "'+u((i=(i=t.name||(e!=null?e.name:e))!=null?i:o,typeof i===s?i.call(e,{name:"name",hash:{},data:r}):i))+'"?</div>\n  </div>\n  <div class="modal-foot">\n    <button id="delete-group-submit">Delete</button>\n    <a href="#" class="js-modal-close" id="delete-group-cancel">Cancel</a>\n  </div>\n</form>\n'},useData:!0}),this.Templates["groups-form"]=Handlebars.template({1:function(e,t,n,r){return"Update"},3:function(e,t,n,r){return"Create"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='<form id="create-group-form" autocomplete="off">\n  <div class="modal-head">\n    <h2>';return i=t["if"].call(e,e!=null?e.id:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(f+=i),f+=' Group</h2>\n  </div>\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n    <div class="modal-field">\n      <label for="create-group-name">Name<em class="mandatory">*</em></label>\n      <input id="create-group-name-fake" name="name-fake" type="text" class="hidden">\n      <input id="create-group-name" name="name" type="text" size="50" maxlength="255" required value="'+a((s=(s=t.name||(e!=null?e.name:e))!=null?s:u,typeof s===o?s.call(e,{name:"name",hash:{},data:r}):s))+'">\n    </div>\n    <div class="modal-field">\n      <label for="create-group-description">Description</label>\n      <textarea id="create-group-description-fake" name="description-fake" class="hidden"></textarea>\n      <textarea id="create-group-description" name="description">'+a((s=(s=t.description||(e!=null?e.description:e))!=null?s:u,typeof s===o?s.call(e,{name:"description",hash:{},data:r}):s))+'</textarea>\n    </div>\n  </div>\n  <div class="modal-foot">\n    <button id="create-group-submit">',i=t["if"].call(e,e!=null?e.id:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),i!=null&&(f+=i),f+'</button>\n    <a href="#" class="js-modal-close" id="create-group-cancel">Cancel</a>\n  </div>\n</form>\n'},useData:!0}),this.Templates["groups-header"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i=t.helperMissing,s=this.escapeExpression;return'<header class="page-header">\n  <h1 class="page-title">'+s((t.t||e&&e.t||i).call(e,"user_groups.page",{name:"t",hash:{},data:r}))+'</h1>\n  <div class="page-actions">\n    <div class="button-group">\n      <button id="groups-create">Create Group</button>\n    </div>\n  </div>\n  <p class="page-description">'+s((t.t||e&&e.t||i).call(e,"user_groups.page.description",{name:"t",hash:{},data:r}))+"</p>\n</header>\n"},useData:!0}),this.Templates["groups-layout"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="page">\n  <div id="groups-header"></div>\n  <div id="groups-search"></div>\n  <div id="groups-list"></div>\n  <div id="groups-list-footer"></div>\n</div>\n'},useData:!0}),this.Templates["groups-list-footer"]=Handlebars.template({1:function(e,t,n,r){return'    <a id="groups-fetch-more" class="spacer-left" href="#">show more</a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s,o="function",u=t.helperMissing,a=this.escapeExpression,f='<footer class="spacer-top note text-center">\n  '+a((s=(s=t.count||(e!=null?e.count:e))!=null?s:u,typeof s===o?s.call(e,{name:"count",hash:{},data:r}):s))+"/"+a((s=(s=t.total||(e!=null?e.total:e))!=null?s:u,typeof s===o?s.call(e,{name:"total",hash:{},data:r}):s))+" shown\n";return i=t["if"].call(e,e!=null?e.more:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.noop,data:r}),i!=null&&(f+=i),f+"</footer>\n"},useData:!0}),this.Templates["groups-list-item"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){var i,s="function",o=t.helperMissing,u=this.escapeExpression;return'<div class="pull-right big-spacer-left nowrap">\n  <a class="js-group-update icon-edit little-spacer-right" title="Update Details" data-toggle="tooltip" href="#"></a>\n  <a class="js-group-delete icon-delete" title="Delete" data-toggle="tooltip" href="#"></a>\n</div>\n\n<div class="display-inline-block text-top width-20">\n  <strong class="js-group-name">'+u((i=(i=t.name||(e!=null?e.name:e))!=null?i:o,typeof i===s?i.call(e,{name:"name",hash:{},data:r}):i))+'</strong>\n</div>\n\n<div class="display-inline-block text-top big-spacer-left width-25">\n  <div class="pull-left spacer-right">\n    <strong>Members</strong>\n  </div>\n  <div class="overflow-hidden bordered-left">\n    <span class="spacer-left spacer-right">'+u((i=(i=t.membersCount||(e!=null?e.membersCount:e))!=null?i:o,typeof i===s?i.call(e,{name:"membersCount",hash:{},data:r}):i))+'</span>\n    <a class="js-group-users icon-bullet-list" title="Update Users" data-toggle="tooltip" href="#"></a>\n  </div>\n</div>\n\n<div class="display-inline-block text-top big-spacer-left width-40">\n  <span class="js-group-description">'+u((i=(i=t.description||(e!=null?e.description:e))!=null?i:o,typeof i===s?i.call(e,{name:"description",hash:{},data:r}):i))+"</span>\n</div>\n"},useData:!0}),this.Templates["groups-search"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="panel panel-vertical bordered-bottom spacer-bottom">\n  <form id="groups-search-form" class="search-box">\n    <button id="groups-search-submit" class="search-box-submit button-clean"><i class="icon-search"></i></button>\n    <input id="groups-search-query" class="search-box-input" type="search" name="q" placeholder="Search" maxlength="100">\n  </form>\n</div>\n'},useData:!0}),this.Templates["groups-users"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,r){return'<div class="modal-head">\n  <h2>Update users</h2>\n</div>\n<div class="modal-body">\n  <div class="js-modal-messages"></div>\n  <div id="groups-users"></div>\n</div>\n<div class="modal-foot">\n  <a href="#" class="js-modal-close" id="groups-users-done">Done</a>\n</div>\n'},useData:!0}),define("apps/groups/templates",function(){}),define("apps/groups/layout",["exports","module","backbone.marionette","./templates"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n);t.exports=s["default"].LayoutView.extend({template:Templates["groups-layout"],regions:{headerRegion:"#groups-header",searchRegion:"#groups-search",listRegion:"#groups-list",listFooterRegion:"#groups-list-footer"}})}),define("backbone",[],function(){return window.Backbone}),define("underscore",[],function(){return window._}),define("apps/groups/group",["exports","module","underscore","backbone"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r);t.exports=o["default"].Model.extend({urlRoot:function(){return baseUrl+"/api/user_groups"},sync:function(t,n,r){var i=r||{};t==="create"&&s["default"].defaults(i,{url:this.urlRoot()+"/create",type:"POST",data:s["default"].pick(n.toJSON(),"name","description")});if(t==="update"){var u=s["default"].extend(s["default"].pick(n.changed,"name","description"),{id:n.id});s["default"].defaults(i,{url:this.urlRoot()+"/update",type:"POST",data:u})}return t==="delete"&&s["default"].defaults(i,{url:this.urlRoot()+"/delete",type:"POST",data:{id:this.id}}),o["default"].ajax(i)}})}),define("apps/groups/groups",["exports","module","backbone","./group"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r);t.exports=s["default"].Collection.extend({model:o["default"],url:function(){return baseUrl+"/api/user_groups/search"},parse:function(t){return this.total=+t.total,this.p=+t.p,this.ps=+t.ps,t.groups},fetch:function(t){var n=t&&t.data||{};return this.q=n.q,this._super(t)},fetchMore:function(){var t=this.p+1;return this.fetch({add:!0,remove:!1,data:{p:t,ps:this.ps,q:this.q}})},refresh:function(){return this.fetch({reset:!0,data:{q:this.q}})},hasMore:function(){return this.total>this.p*this.ps}})}),define("jquery",[],function(){return window.jQuery}),define("components/common/modals",["exports","module","jquery","backbone.marionette"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r),u="modal";t.exports=o["default"].ItemView.extend({className:"modal",overlayClassName:"modal-overlay",htmlClassName:"modal-open",events:function(){return{"click .js-modal-close":"onCloseClick"}},onRender:function(){var t=this;this.$el.detach().appendTo((0,s["default"])("body")),(0,s["default"])("html").addClass(this.htmlClassName),this.renderOverlay(),this.keyScope=key.getScope(),key.setScope("modal"),key("escape","modal",function(){return t.destroy(),!1}),this.show(),!this.options.large||this.$el.addClass("modal-large")},show:function(){var t=this;setTimeout(function(){t.$el.addClass("in"),(0,s["default"])("."+t.overlayClassName).addClass("in")},0)},onDestroy:function(){(0,s["default"])("html").removeClass(this.htmlClassName),this.removeOverlay(),key.deleteScope("modal"),key.setScope(this.keyScope)},onCloseClick:function(t){t.preventDefault(),this.destroy()},renderOverlay:function(){var t=(0,s["default"])("."+this.overlayClassName);t.length===0&&(0,s["default"])('<div class="'+this.overlayClassName+'"></div>').appendTo((0,s["default"])("body"))},removeOverlay:function(){(0,s["default"])("."+this.overlayClassName).remove()},attachCloseEvents:function(){var t=this;(0,s["default"])("body").on("click."+u,function(){(0,s["default"])("body").off("click."+u),t.destroy()})}})}),define("components/common/modal-form",["exports","module","underscore","components/common/modals"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r);t.exports=o["default"].extend({ui:function(){return{messagesContainer:".js-modal-messages"}},events:function(){return s["default"].extend(o["default"].prototype.events.apply(this,arguments),{"keydown input,textarea,select":"onInputKeydown","submit form":"onFormSubmit"})},onRender:function(){o["default"].prototype.onRender.apply(this,arguments);var t=this;setTimeout(function(){t.$(":tabbable").first().focus()},0)},onInputKeydown:function(t){t.keyCode===27&&this.destroy()},onFormSubmit:function(t){t.preventDefault()},showErrors:function(t,n){var r=this.ui.messagesContainer.empty();s["default"].isArray(t)&&t.forEach(function(e){var t='<div class="alert alert-danger">'+e.msg+"</div>";r.append(t)}),s["default"].isArray(n)&&n.forEach(function(e){var t='<div class="alert alert-warning">'+e.msg+"</div>";r.append(t)}),this.ui.messagesContainer.scrollParent().scrollTop(0)},disableForm:function(){var t=this.$("form");this.disabledFields=t.find(":input:not(:disabled)"),this.disabledFields.prop("disabled",!0)},enableForm:function(){this.disabledFields!=null&&this.disabledFields.prop("disabled",!1)}})}),define("apps/groups/form-view",["exports","module","components/common/modal-form","./templates"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n);t.exports=s["default"].extend({template:Templates["groups-form"],onRender:function(){this._super(),this.$('[data-toggle="tooltip"]').tooltip({container:"body",placement:"bottom"})},onDestroy:function(){this._super(),this.$('[data-toggle="tooltip"]').tooltip("destroy")},onFormSubmit:function(t){this._super(t),this.sendRequest()}})}),define("apps/groups/create-view",["exports","module","./group","./form-view"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n),o=i(r);t.exports=o["default"].extend({sendRequest:function(){var t=this,n=new s["default"]({name:this.$("#create-group-name").val(),description:this.$("#create-group-description").val()});return this.disableForm(),n.save(null,{statusCode:{400:null}}).done(function(){t.collection.refresh(),t.destroy()}).fail(function(e){t.enableForm(),t.showErrors(e.responseJSON.errors,e.responseJSON.warnings)})}})}),define("apps/groups/header-view",["exports","module","backbone.marionette","./create-view","./templates"],function(e,t,n,r,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(n),u=s(r);t.exports=o["default"].ItemView.extend({template:Templates["groups-header"],events:{"click #groups-create":"onCreateClick"},onCreateClick:function(t){t.preventDefault(),this.createGroup()},createGroup:function(){(new u["default"]({collection:this.collection})).render()}})}),define("apps/groups/search-view",["exports","module","underscore","backbone.marionette","./templates"],function(e,t,n,r,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(n),u=s(r);t.exports=u["default"].ItemView.extend({template:Templates["groups-search"],events:{"submit #groups-search-form":"onFormSubmit","search #groups-search-query":"debouncedOnKeyUp","keyup #groups-search-query":"debouncedOnKeyUp"},initialize:function(){this._bufferedValue=null,this.debouncedOnKeyUp=o["default"].debounce(this.onKeyUp,400)},onRender:function(){this.delegateEvents()},onFormSubmit:function(t){t.preventDefault(),this.debouncedOnKeyUp()},onKeyUp:function(){var t=this.getQuery();if(t===this._bufferedValue)return;this._bufferedValue=this.getQuery(),this.searchRequest!=null&&this.searchRequest.abort(),this.searchRequest=this.search(t)},getQuery:function(){return this.$("#groups-search-query").val()},search:function(t){return this.collection.fetch({reset:!0,data:{q:t}})}})}),define("apps/groups/update-view",["exports","module","./form-view"],function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var i=r(n);t.exports=i["default"].extend({sendRequest:function(){var t=this;return this.model.set({name:this.$("#create-group-name").val(),description:this.$("#create-group-description").val()}),this.disableForm(),this.model.save(null,{statusCode:{400:null}}).done(function(){t.collection.refresh(),t.destroy()}).fail(function(e){t.enableForm(),t.showErrors(e.responseJSON.errors,e.responseJSON.warnings)})}})}),define("apps/groups/delete-view",["exports","module","components/common/modal-form","./templates"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(n);t.exports=s["default"].extend({template:Templates["groups-delete"],onFormSubmit:function(t){this._super(t),this.sendRequest()},sendRequest:function(){var t=this,n=this.model.collection;return this.model.destroy({wait:!0,statusCode:{400:null}}).done(function(){n.total--,t.destroy()}).fail(function(e){t.showErrors(e.responseJSON.errors,e.responseJSON.warnings)})},showErrors:function(t,n){this.$(".js-modal-text").addClass("hidden"),this.disableForm(),this._super(t,n)}})}),define("components/common/select-list",["exports","jquery","underscore","backbone"],function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var s=i(t),o=i(n),u=i(r),a=null,f=u["default"].Collection.extend({initialize:function(t){this.options=t},parse:function(t){return this.options.parse.call(this,t)},fetch:function(t){var n=s["default"].extend({page:1,pageSize:100},t.data||{}),r=s["default"].extend({},t,{data:n});this.settings={url:r.url,data:n},u["default"].Collection.prototype.fetch.call(this,r)},fetchNextPage:function(t){if(this.more){var n=this.settings.data.page+1,r=s["default"].extend(this.settings,t);r.data.page=n,r.remove=!1,this.fetch(r)}else t.error()}}),l=u["default"].View.extend({tagName:"li",template:function(t){return'<input class="select-list-list-checkbox" type="checkbox"><div class="select-list-list-item">'+t+"</div>"},events:{"change .select-list-list-checkbox":"toggle"},initialize:function(t){this.listenTo(this.model,"change",this.render),this.settings=t.settings},render:function(){this.$el.html(this.template(this.settings.format(this.model.toJSON()))),this.$("input").prop("name",this.model.get("name")),this.$el.toggleClass("selected",this.model.get("selected")),this.$(".select-list-list-checkbox").prop("title",this.model.get("selected")?this.settings.tooltips.deselect:this.settings.tooltips.select).prop("checked",this.model.get("selected")),this.settings.readOnly&&this.$(".select-list-list-checkbox").prop("disabled",!0)},remove:function(t){if(t){var n=this;n.$el.addClass(this.model.get("selected")?"added":"removed"),setTimeout(function(){u["default"].View.prototype.remove.call(n,arguments)},500)}else u["default"].View.prototype.remove.call(this,arguments)},toggle:function(){var t=this.model.get("selected"),n=this,r=t?this.settings.deselectUrl:this.settings.selectUrl,i=s["default"].extend({},this.settings.extra||{});i[this.settings.selectParameter]=this.model.get(this.settings.selectParameterValue),n.$el.addClass("progress"),s["default"].ajax({url:r,type:"POST",data:i,statusCode:{400:null,401:null,403:null,500:null}}).done(function(){n.model.set("selected",!t)}).fail(function(e){n.render(),a(e)}).always(function(){n.$el.removeClass("progress")})}}),c=u["default"].View.extend({template:function(t){return'<div class="select-list-container"><div class="select-list-control"><div class="select-list-check-control"><a class="select-list-control-button" name="selected">'+t.selected+"</a>"+'<a class="select-list-control-button" name="deselected">'+t.deselected+"</a>"+'<a class="select-list-control-button" name="all">'+t.all+"</a>"+"</div>"+'<div class="select-list-search-control">'+'<form class="search-box">'+'<span class="search-box-submit button-clean"><i class="icon-search"></i></span>'+'<input class="search-box-input" type="search" name="q" placeholder="Search" maxlength="100" autocomplete="off">'+"</form>"+"</div>"+"</div>"+'<div class="select-list-list-container">'+'<ul class="select-list-list"></ul>'+"</div>"+"</div>"},events:{"click .select-list-control-button[name=selected]":"showSelected","click .select-list-control-button[name=deselected]":"showDeselected","click .select-list-control-button[name=all]":"showAll"},initialize:function(t){this.listenTo(this.collection,"add",this.renderListItem),this.listenTo(this.collection,"reset",this.renderList),this.listenTo(this.collection,"remove",this.removeModel),this.listenTo(this.collection,"change:selected",this.confirmFilter),this.settings=t.settings;var n=this;this.showFetchSpinner=function(){n.$listContainer.addClass("loading")},this.hideFetchSpinner=function(){n.$listContainer.removeClass("loading")};var r=function(){n.showFetchSpinner(),n.collection.fetchNextPage({success:function(){n.hideFetchSpinner()},error:function(){n.hideFetchSpinner()}})};this.onScroll=o["default"].throttle(r,1e3)},render:function(){var t=this,n=function(){t.search()};this.$el.html(this.template(this.settings.labels)).width(this.settings.width),this.$listContainer=this.$(".select-list-list-container"),this.settings.readOnly?this.$listContainer.addClass("select-list-list-container-readonly"):this.$listContainer.height(this.settings.height).css("overflow","auto").on("scroll",function(){t.scroll()}),this.$list=this.$(".select-list-list");var r=this.$(".select-list-search-control input").on("keyup",o["default"].debounce(n,250)).on("search",o["default"].debounce(n,250));this.settings.focusSearch&&setTimeout(function(){r.focus()},250),this.listItemViews=[],a=function(e){var n=window.t("default_error_message");e!=null&&e.responseJSON!=null&&e.responseJSON.errors!=null&&(n=o["default"].pluck(e.responseJSON.errors,"msg").join(". ")),t.$el.prevAll(".alert").remove(),(0,s["default"])("<div>").addClass("alert alert-danger").text(n).insertBefore(t.$el)},this.settings.readOnly&&this.$(".select-list-control").remove()},renderList:function(){this.listItemViews.forEach(function(e){e.remove()}),this.listItemViews=[],this.collection.length>0?this.collection.each(this.renderListItem,this):this.settings.readOnly&&this.renderEmpty(),this.$listContainer.scrollTop(0)},renderListItem:function(t){var n=new l({model:t,settings:this.settings});this.listItemViews.push(n),this.$list.append(n.el),n.render()},renderEmpty:function(){this.$list.append('<li class="empty-message">'+this.settings.labels.noResults+"</li>")},confirmFilter:function(t){this.currentFilter!=="all"&&this.collection.remove(t)},removeModel:function(t,n,r){this.listItemViews[r.index].remove(!0),this.listItemViews.splice(r.index,1)},filterBySelection:function(t){var n=this;t=this.currentFilter=t||this.currentFilter,t!=null&&(this.$(".select-list-check-control").toggleClass("disabled",!1),this.$(".select-list-search-control").toggleClass("disabled",!0),this.$(".select-list-search-control input").val(""),this.$(".select-list-control-button").removeClass("active").filter("[name="+t+"]").addClass("active"),this.showFetchSpinner(),this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:{selected:t},success:function(){n.hideFetchSpinner()},error:a}))},showSelected:function(){this.filterBySelection("selected")},showDeselected:function(){this.filterBySelection("deselected")},showAll:function(){this.filterBySelection("all")},search:function(){var t=this.$(".select-list-search-control input").val(),n=t.length>0,r=this,i={};this.$(".select-list-check-control").toggleClass("disabled",n),this.$(".select-list-search-control").toggleClass("disabled",!n),n?(this.showFetchSpinner(),this.currentFilter="all",i[this.settings.queryParam]=t,i.selected="all",this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:i,success:function(){r.hideFetchSpinner()},error:a})):this.filterBySelection()},searchByQuery:function(t){this.$(".select-list-search-control input").val(t),this.search()},clearSearch:function(){this.filterBySelection()},scroll:function(){var t=this.$listContainer.scrollTop()>=this.$list[0].scrollHeight-this.$listContainer.outerHeight();t&&this.collection.more&&this.onScroll()}});window.SelectList=function(e){return this.settings=s["default"].extend(window.SelectList.defaults,e),this.collection=new f({parse:this.settings.parse}),this.view=new c({el:this.settings.el,collection:this.collection,settings:this.settings}),this.view.render(),this.filter("selected"),this},window.SelectList.prototype.filter=function(e){return this.view.filterBySelection(e),this},window.SelectList.prototype.search=function(e){return this.view.searchByQuery(e),this},window.SelectList.defaults={width:"50%",height:400,readOnly:!1,focusSearch:!0,format:function(t){return t.value},parse:function(t){return this.more=t.more,t.results},queryParam:"query",labels:{selected:"Selected",deselected:"Deselected",all:"All",noResults:""},tooltips:{select:"Click this to select item",deselect:"Click this to deselect item"},errorMessage:"Something gone wrong, try to reload the page and try again."}}),define("apps/groups/users-view",["exports","module","components/common/modals","components/common/select-list","./templates"],function(e,t,n,r,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(n);t.exports=o["default"].extend({template:Templates["groups-users"],onRender:function(){this._super(),new window.SelectList({el:this.$("#groups-users"),width:"100%",readOnly:!1,focusSearch:!1,format:function(t){return t.name+'<br><span class="note">'+t.login+"</span>"},queryParam:"q",searchUrl:baseUrl+"/api/user_groups/users?ps=100&id="+this.model.id,selectUrl:baseUrl+"/api/user_groups/add_user",deselectUrl:baseUrl+"/api/user_groups/remove_user",extra:{id:this.model.id},selectParameter:"login",selectParameterValue:"login",parse:function(t){return this.more=!1,t.users}})},onDestroy:function(){this.model.collection.refresh(),this._super()}})}),define("apps/groups/list-item-view",["exports","module","jquery","backbone.marionette","./update-view","./delete-view","./users-view","./templates"],function(e,t,n,r,i,s,o,u){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var f=a(n),l=a(r),c=a(i),h=a(s),p=a(o);t.exports=l["default"].ItemView.extend({tagName:"li",className:"panel panel-vertical",template:Templates["groups-list-item"],events:{"click .js-group-update":"onUpdateClick","click .js-group-delete":"onDeleteClick","click .js-group-users":"onUsersClick"},onRender:function(){this.$el.attr("data-id",this.model.id),this.$('[data-toggle="tooltip"]').tooltip({container:"body",placement:"bottom"})},onDestroy:function(){this.$('[data-toggle="tooltip"]').tooltip("destroy")},onUpdateClick:function(t){t.preventDefault(),this.updateGroup()},onDeleteClick:function(t){t.preventDefault(),this.deleteGroup()},onUsersClick:function(t){t.preventDefault(),(0,f["default"])(".tooltip").remove(),this.showUsers()},updateGroup:function(){(new c["default"]({model:this.model,collection:this.model.collection})).render()},deleteGroup:function(){(new h["default"]({model:this.model})).render()},showUsers:function(){(new p["default"]({model:this.model})).render()}})}),define("apps/groups/list-view",["exports","module","backbone.marionette","./list-item-view","./templates"],function(e,t,n,r,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(n),u=s(r);t.exports=o["default"].CollectionView.extend({tagName:"ul",childView:u["default"]})}),define("apps/groups/list-footer-view",["exports","module","underscore","backbone.marionette","./templates"],function(e,t,n,r,i){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}var o=s(n),u=s(r);t.exports=u["default"].ItemView.extend({template:Templates["groups-list-footer"],collectionEvents:{all:"render"},events:{"click #groups-fetch-more":"onMoreClick"},onMoreClick:function(t){t.preventDefault(),this.fetchMore()},fetchMore:function(){this.collection.fetchMore()},serializeData:function(){return o["default"].extend(this._super(),{total:this.collection.total,count:this.collection.length,more:this.collection.hasMore()})}})}),define("apps/groups/app",["exports","module","backbone.marionette","./layout","./groups","./header-view","./search-view","./list-view","./list-footer-view"],function(e,t,n,r,i,s,o,u,a){"use strict";function f(e){return e&&e.__esModule?e:{"default":e}}var l=f(n),c=f(r),h=f(i),p=f(s),d=f(o),v=f(u),m=f(a),g=new l["default"].Application,y=function(t){this.layout=new c["default"]({el:t.el}),this.layout.render(),this.groups=new h["default"],this.headerView=new p["default"]({collection:this.groups}),this.layout.headerRegion.show(this.headerView),this.searchView=new d["default"]({collection:this.groups}),this.layout.searchRegion.show(this.searchView),this.listView=new v["default"]({collection:this.groups}),this.layout.listRegion.show(this.listView),this.listFooterView=new m["default"]({collection:this.groups}),this.layout.listFooterRegion.show(this.listFooterView),this.groups.fetch()};g.on("start",function(e){window.requestMessages().done(function(){y.call(g,e)})}),t.exports=g});